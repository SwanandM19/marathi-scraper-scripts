
# name: Jabari Khabri - Daily News Scraper v3.0


# on:
#   schedule:
#     # 9:00 AM IST = 3:30 AM UTC
#     - cron: '30 3 * * *'
#     # 4:00 PM IST = 10:30 AM UTC
#     - cron: '30 10 * * *'


#   workflow_dispatch:


# jobs:
#   scrape-and-generate:
#     runs-on: ubuntu-latest
#     timeout-minutes: 90


#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4


#       - name: Set up Python 3.11
#         uses: actions/setup-python@v5
#         with:
#           python-version: '3.11'


#       - name: Install dependencies
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt


#       - name: Install Playwright browsers
#         run: playwright install chromium


#       - name: Install Playwright system dependencies
#         run: playwright install-deps chromium


#       - name: Create Google Sheets credentials
#         run: |
#           echo '${{ secrets.GOOGLE_CREDENTIALS }}' > credentials.json


#       - name: Run Jabari Khabri Scraper
#         env:
#           PERPLEXITY_API_KEY: ${{ secrets.PERPLEXITY_API_KEY }}
#         run: python scraper.py


#       - name: Clean up credentials
#         run: rm -f credentials.json


#       - name: Workflow complete
#         run: echo "✅ 50 scripts generated and saved to Google Sheets!"



name: Jabari Khabri - Daily News Scraper v3.0


on:
  schedule:
    # 6:00 AM IST = 12:30 AM UTC
    - cron: '30 0 * * *'
    # 1:00 PM IST = 7:30 AM UTC
    - cron: '30 7 * * *'


  workflow_dispatch:


jobs:
  scrape-and-generate:
    runs-on: ubuntu-latest
    timeout-minutes: 90


    steps:
      - name: Checkout repository
        uses: actions/checkout@v4


      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'


      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt


      - name: Install Playwright browsers
        run: playwright install chromium


      - name: Install Playwright system dependencies
        run: playwright install-deps chromium


      - name: Create Google Sheets credentials
        run: |
          echo '${{ secrets.GOOGLE_CREDENTIALS }}' > credentials.json


      - name: Run Jabari Khabri Scraper
        env:
          PERPLEXITY_API_KEY: ${{ secrets.PERPLEXITY_API_KEY }}
        run: python scraper.py


      - name: Clean up credentials
        run: rm -f credentials.json


      - name: Workflow complete
        run: echo "✅ 50 scripts generated and saved to Google Sheets!"
